import { Component, OnInit } from '@angular/core';
import { FormArray, FormControl, FormGroup, Validators } from '@angular/forms';
import { CustomValidators } from '../../passwordValidators/passwordValidators';
import { Router } from '@angular/router';
@Component({
    selector: 'app-login',
    templateUrl: './login.component.html',
    styleUrl: './login.component.css'
})
export class LoginComponent implements OnInit {

    loginForm!: FormGroup;


    constructor(private router: Router) { }
    ngOnInit(): void {
        this.loginForm = new FormGroup({

            username: new FormControl(null, [Validators.required, Validators.minLength(5)]),
            password: new FormControl(null, [Validators.required, CustomValidators.passwordValidator()]),
            retypePassword: new FormControl(null),
            email: new FormControl(null, [Validators.required, Validators.email]),
            age: new FormControl(null),
            birthDate: new FormControl(null),
            linkedInURL: new FormControl(null),
            phone: new FormControl(null),
            cv: new FormControl(null),
            gender: new FormControl(null),
            occupation: new FormControl(null),
            status: new FormControl(null),
            about: new FormControl(null),
            terms: new FormControl(null),
            languages: new FormArray([new FormControl(null)])
            // matchPassword: CustomValidators.matchPassword

        }, { validators: CustomValidators.matchPassword })
    }

    // to link my form with html file
    submitLoginForm() {
        console.log('form submitted');
        console.log(this.loginForm.value);

        // route to dashboard
        this.router.navigate(['/dashboard']);
    }

    get languages(): FormArray {
        return this.loginForm.get('languages') as FormArray;
    }

    addLanguage() {
        let languages = this.loginForm.get('languages') as FormArray;
        languages.push(new FormControl(null));

        // const languageControl = new FormControl(null);
        // this.languages.push(languageControl);
    }
}

......................................................................


<div class="form-container" >
    <form[formGroup]="loginForm"(ngSubmit) = "submitLoginForm()" >
        <h2>Login </h2>

        < !--Text Input-- >
            <div class="form-group" >
                <label for= "text" > Username </label>
                    < input type = "text" placeholder = "Username" formControlName = "username" />

                        <div class="msg" * ngIf="loginForm.get('username')!.invalid && loginForm.get('username')!.touched" >
                            <span * ngIf="loginForm.get('username')!.errors?.['required']" >
            * username is required </span>
    < span * ngIf="loginForm.get('username')!.errors?.['minlength']" >
            * min name 5 chars </span>

    </div>
    </div>

    < !--Password Input-- >
        <div class="form-group" >
            <label for= "password" > Password </label>
                < input type = "password" placeholder = "Enter password" formControlName = "password" >

                    <div class="msg" * ngIf="loginForm.get('password')!.invalid && loginForm.get('password')!.touched" >
                        <span ngIf="loginForm.get('password')!.errors?.['required']" > password required </span>
                            < span * ngIf="loginForm.get('password')!.errors?.['passwordStrength']" > error </span>
                                </div>
                                </div>

                                < !--Re - type Password Input-- >
                                    <div class="form-group" >
                                        <label for= "password" > Re - type Password </label>
                                            < input type = "password" placeholder = "Re-type Password" formControlName = "retypePassword"[ngClass] = "{'ng-invalid':loginForm.hasError('passwordMismatch')}" >

                                                <div class="msg" * ngIf="loginForm.get('retypePassword')!.touched" >
                                                    <span * ngIf="loginForm.get('retypePassword')!.errors?.['required'] && loginForm.get('retypePassword')!.invalid" >
            * retypePassword is required </span>
    < span * ngIf="loginForm.errors?.['passwordMatch']" >
            * Both Password & retypePassword must be the same </span>
    </div>

    </div>

    < !--Email Input-- >
        <div class="form-group" >
            <label for= "email" > Email </label>
                < input type = "email" placeholder = "Enter email" formControlName = "email" >

                    <div class="msg" * ngIf="loginForm.get('email')!.invalid && loginForm.get('email')!.touched" >
                        <span * ngIf="loginForm.get('email')!.errors?.['required']" >
            * Email is required </span>
    < span * ngIf="loginForm.get('email')!.errors?.['email']" >
            * Email format is not valid </span>
    </div>
    </div>

    < !--Number Input-- >
        <div class="form-group" >
            <label for= "number" > Age </label>
                < input type = "number" placeholder = "Age" formControlName = "age" >
                    </div>

                    < !--Date Input-- >
                        <div class="form-group" >
                            <label for= "date" > Birth Date </label>
                                < input type = "date" placeholder = "Date" formControlName = "birthDate" >
                                    </div>

                                    < !--URL Input-- >
                                        <div class="form-group" >
                                            <label for= "url" > LinkedIn URL </label>
                                                < input type = "url" placeholder = "LinkedIn URL" formControlName = "linkedInURL" >
                                                    </div>

                                                    < !--Telephone Input-- >
                                                        <div class="form-group" >
                                                            <label for= "tel" > Phone NO.</label>
                                                                < input type = "tel" placeholder = "Phone NO." formControlName = "phone" >
                                                                    </div>

                                                                    < !--File Input-- >
                                                                        <div class="form-group" >
                                                                            <label for= "file" > Your C.V </label>
                                                                                < input type = "file" id = "file" formControlName = "cv" >
                                                                                    </div>

                                                                                    < !--Radio Buttons-- >
                                                                                        <div class="form-group" >
                                                                                            <label>Gender </label>
                                                                                            < div class="form-group-inline" >
                                                                                                <input type="radio" id = "radio1" formControlName = "gender" value = "female" >
                                                                                                    <label for= "radio1" > Female </label>
                                                                                                        </div>
                                                                                                        < div class= "form-group-inline" >
                                                                                                        <input type= "radio" id = "radio2" formControlName = "gender" value = "male" >
                                                                                                            <label for= "radio2" > Male </label>
                                                                                                                </div>
                                                                                                                </div>

                                                                                                                < !--Select Dropdown-- >
    <div class= "form-group" >
    <label for= "select" > Status </label>
        < select id = "select" formControlName = "status" >
        <option value= "graduate" > Graduate </option>
            < option value = "student" > Student </option>
                </select>
                </div>

                < !--Textarea -->
                    <div class="form-group" >
                        <label for= "textarea" > About you </label>
                            < textarea id = "textarea" formControlName = "about" rows = "4" placeholder = "About You" > </textarea>
                                </div>

                                < !--Add Textarea-- >
                                    <div class="form-group" formArrayName = "loginForm.languages" >
                                        <label for= "lang" > About you </label>
                                            < input id = "lang" placeholder = "Language" >

                                                <button type="button"(onclick) = "addLanguage()" > Add Language </button>
                                                    </div>

                                                    < !--Checkbox -->
                                                        <div class="form-group-inline" >
                                                            <input type="checkbox" id = "terms" formControlName = "terms" >
                                                                <label for= "terms" > Agree to terms and conditions </label>
                                                                    </div>

                                                                    < !--Submit Button-- >
                                                                        <div class="form-group text-center" >
                                                                            <input type="submit" value = "Join Us" />
                                                                                </div>
                                                                                </form>
                                                                                </div>
                                                                                </div>